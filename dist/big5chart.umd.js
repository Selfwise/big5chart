(function(c,_){typeof exports=="object"&&typeof module<"u"?module.exports=_(require("vue")):typeof define=="function"&&define.amd?define(["vue"],_):(c=typeof globalThis<"u"?globalThis:c||self,c.big5chart=_(c.Vue))})(this,function(c){"use strict";function _(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>e[o]})}}return n.default=e,Object.freeze(n)}const P=_(c);var L={d:(e,n)=>{for(var o in n)L.o(n,o)&&!L.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)},z={};function I(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,a=new Array(n);o<n;o++)a[o]=e[o];return a}function Q(e,n){if(e){if(typeof e=="string")return I(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set"?Array.from(e):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?I(e,n):void 0}}function A(e){return function(n){if(Array.isArray(n))return I(n)}(e)||function(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(e)||Q(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function M(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}L.d(z,{Z:()=>se});const i=(R={computed:()=>P.computed,createTextVNode:()=>P.createTextVNode,createVNode:()=>P.createVNode,defineComponent:()=>P.defineComponent,reactive:()=>P.reactive,ref:()=>P.ref,watch:()=>P.watch,watchEffect:()=>P.watchEffect},F={},L.d(F,R),F),re=(0,i.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,n=this.onClick;return(0,i.createVNode)("span",{class:"vjs-tree-brackets",onClick:n},[e])}}),ae=(0,i.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,n){var o=n.emit;return{uiType:(0,i.computed)(function(){return e.isMultiple?"checkbox":"radio"}),model:(0,i.computed)({get:function(){return e.checked},set:function(a){return o("update:modelValue",a)}})}},render:function(){var e=this.uiType,n=this.model,o=this.$emit;return(0,i.createVNode)("label",{class:["vjs-check-controller",n?"is-checked":""],onClick:function(a){return a.stopPropagation()}},[(0,i.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(e)},null),(0,i.createVNode)("input",{checked:n,class:"vjs-check-controller-original is-".concat(e),type:e,onChange:function(){return o("change",n)}},null)])}}),le=(0,i.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var e=this.nodeType,n=this.onClick,o=e==="objectStart"||e==="arrayStart";return o||e==="objectCollapsed"||e==="arrayCollapsed"?(0,i.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(o?"open":"close"),onClick:n},[(0,i.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,i.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});var R,F;function H(e){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},H(e)}function Y(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function x(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,m=a||{},v=m.key,N=m.index,g=m.type,C=g===void 0?"content":g,b=m.showComma,j=b!==void 0&&b,w=m.length,O=w===void 0?1:w,E=Y(e);if(E==="array"){var B=Z(e.map(function(s,u,t){return x(s,"".concat(n,"[").concat(u,"]"),o+1,{index:u,showComma:u!==t.length-1,length:O,type:C})}));return[x("[",n,o,{showComma:!1,key:v,length:e.length,type:"arrayStart"})[0]].concat(B,x("]",n,o,{showComma:j,length:e.length,type:"arrayEnd"})[0])}if(E==="object"){var l=Object.keys(e),h=Z(l.map(function(s,u,t){return x(e[s],/^[a-zA-Z_]\w*$/.test(s)?"".concat(n,".").concat(s):"".concat(n,'["').concat(s,'"]'),o+1,{key:s,showComma:u!==t.length-1,length:O,type:C})}));return[x("{",n,o,{showComma:!1,key:v,index:N,length:l.length,type:"objectStart"})[0]].concat(h,x("}",n,o,{showComma:j,length:l.length,type:"objectEnd"})[0])}return[{content:e,level:o,key:v,index:N,path:n,showComma:j,length:O,type:C}]}function Z(e){if(typeof Array.prototype.flat=="function")return e.flat();for(var n=A(e),o=[];n.length;){var a=n.shift();Array.isArray(a)?n.unshift.apply(n,A(a)):o.push(a)}return o}function K(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e==null)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(H(e)!=="object")return e;if(n.get(e))return n.get(e);if(Array.isArray(e)){var o=e.map(function(v){return K(v,n)});return n.set(e,o),o}var a={};for(var m in e)a[m]=K(e[m],n);return n.set(e,a),a}function W(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),o.push.apply(o,a)}return o}function J(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?W(Object(o),!0).forEach(function(a){M(e,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):W(Object(o)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))})}return e}var G={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},theme:{type:String,default:"light"},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}};const ce=(0,i.defineComponent)({name:"TreeNode",props:J(J({},G),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(e,n){var o=n.emit,a=(0,i.computed)(function(){return Y(e.node.content)}),m=(0,i.computed)(function(){return"vjs-value vjs-value-".concat(a.value)}),v=(0,i.computed)(function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key}),N=(0,i.computed)(function(){return e.selectableType==="multiple"}),g=(0,i.computed)(function(){return e.selectableType==="single"}),C=(0,i.computed)(function(){return e.nodeSelectable(e.node)&&(N.value||g.value)}),b=(0,i.reactive)({editing:!1}),j=function(u){var t,r,d=(r=(t=u.target)===null||t===void 0?void 0:t.value)==="null"?null:r==="undefined"?void 0:r==="true"||r!=="false"&&(r[0]+r[r.length-1]==='""'||r[0]+r[r.length-1]==="''"?r.slice(1,-1):typeof Number(r)=="number"&&!isNaN(Number(r))||r==="NaN"?Number(r):r);o("valueChange",d,e.node.path)},w=(0,i.computed)(function(){var u,t=(u=e.node)===null||u===void 0?void 0:u.content;return t===null?t="null":t===void 0&&(t="undefined"),a.value==="string"?'"'.concat(t,'"'):t+""}),O=function(){var u=e.renderNodeValue;return u?u({node:e.node,defaultValue:w.value}):w.value},E=function(){o("bracketsClick",!e.collapsed,e.node)},B=function(){o("iconClick",!e.collapsed,e.node)},l=function(){o("selectedChange",e.node)},h=function(){o("nodeClick",e.node),C.value&&e.selectOnClickNode&&o("selectedChange",e.node)},s=function(u){if(e.editable&&!b.editing){b.editing=!0;var t=function r(d){var p;d.target!==u.target&&((p=d.target)===null||p===void 0?void 0:p.parentElement)!==u.target&&(b.editing=!1,document.removeEventListener("click",r))};document.removeEventListener("click",t),document.addEventListener("click",t)}};return function(){var u,t=e.node;return(0,i.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":e.showSelectController,"has-carets":e.showIcon,"is-highlight":e.highlightSelectedNode&&e.checked,dark:e.theme==="dark"},onClick:h,style:e.style},[e.showLineNumber&&(0,i.createVNode)("span",{class:"vjs-node-index"},[t.id+1]),e.showSelectController&&C.value&&t.type!=="objectEnd"&&t.type!=="arrayEnd"&&(0,i.createVNode)(ae,{isMultiple:N.value,checked:e.checked,onChange:l},null),(0,i.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(t.level)).map(function(r,d){return(0,i.createVNode)("div",{key:d,class:{"vjs-indent-unit":!0,"has-line":e.showLine}},null)}),e.showIcon&&(0,i.createVNode)(le,{nodeType:t.type,onClick:B},null)]),t.key&&(0,i.createVNode)("span",{class:"vjs-key"},[(u=e.renderNodeKey,u?u({node:e.node,defaultKey:v.value||""}):v.value),(0,i.createVNode)("span",{class:"vjs-colon"},[":".concat(e.showKeyValueSpace?" ":"")])]),(0,i.createVNode)("span",null,[t.type!=="content"&&t.content?(0,i.createVNode)(re,{data:t.content.toString(),onClick:E},null):(0,i.createVNode)("span",{class:m.value,onClick:!e.editable||e.editableTrigger&&e.editableTrigger!=="click"?void 0:s,onDblclick:e.editable&&e.editableTrigger==="dblclick"?s:void 0},[e.editable&&b.editing?(0,i.createVNode)("input",{value:w.value,onChange:j,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):O()]),t.showComma&&(0,i.createVNode)("span",null,[","]),e.showLength&&e.collapsed&&(0,i.createVNode)("span",{class:"vjs-comment"},[(0,i.createTextVNode)(" // "),t.length,(0,i.createTextVNode)(" items ")])])])}}});function X(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),o.push.apply(o,a)}return o}function k(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?X(Object(o),!0).forEach(function(a){M(e,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):X(Object(o)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))})}return e}const se=(0,i.defineComponent)({name:"Tree",props:k(k({},G),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},collapsedNodeLength:{type:Number,default:1/0},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function},theme:{type:String,default:"light"}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(e,n){var o=n.emit,a=n.slots,m=(0,i.ref)(),v=(0,i.computed)(function(){return x(e.data,e.rootPath)}),N=function(t,r){return v.value.reduce(function(d,p){var f,y=p.level>=t||p.length>=r,S=(f=e.pathCollapsible)===null||f===void 0?void 0:f.call(e,p);return p.type!=="objectStart"&&p.type!=="arrayStart"||!y&&!S?d:k(k({},d),{},M({},p.path,1))},{})},g=(0,i.reactive)({translateY:0,visibleData:null,hiddenPaths:N(e.deep,e.collapsedNodeLength)}),C=(0,i.computed)(function(){for(var t=null,r=[],d=v.value.length,p=0;p<d;p++){var f=k(k({},v.value[p]),{},{id:p}),y=g.hiddenPaths[f.path];if(t&&t.path===f.path){var S=t.type==="objectStart",$=k(k(k({},f),t),{},{showComma:f.showComma,content:S?"{...}":"[...]",type:S?"objectCollapsed":"arrayCollapsed"});t=null,r.push($)}else{if(y&&!t){t=f;continue}if(t)continue;r.push(f)}}return r}),b=(0,i.computed)(function(){var t=e.selectedValue;return t&&e.selectableType==="multiple"&&Array.isArray(t)?t:[t]}),j=(0,i.computed)(function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),w=function(){var t=C.value;if(e.virtual){var r,d=e.height/e.itemHeight,p=((r=m.value)===null||r===void 0?void 0:r.scrollTop)||0,f=Math.floor(p/e.itemHeight),y=f<0?0:f+d>t.length?t.length-d:f;y<0&&(y=0);var S=y+d;g.translateY=y*e.itemHeight,g.visibleData=t.filter(function($,T){return T>=y&&T<S})}else g.visibleData=t},O=function(){w()},E=function(t){var r,d,p=t.path,f=e.selectableType;if(f==="multiple"){var y=b.value.findIndex(function(V){return V===p}),S=A(b.value);y!==-1?S.splice(y,1):S.push(p),o("update:selectedValue",S),o("selectedChange",S,A(b.value))}else if(f==="single"&&b.value[0]!==p){var $=(r=b.value,d=1,function(V){if(Array.isArray(V))return V}(r)||function(V,ee){var D=V==null?null:typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(D!=null){var te,ne,U=[],q=!0,oe=!1;try{for(D=D.call(V);!(q=(te=D.next()).done)&&(U.push(te.value),!ee||U.length!==ee);q=!0);}catch(ke){oe=!0,ne=ke}finally{try{q||D.return==null||D.return()}finally{if(oe)throw ne}}return U}}(r,d)||Q(r,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],T=p;o("update:selectedValue",T),o("selectedChange",T,$)}},B=function(t){o("nodeClick",t)},l=function(t,r){if(t)g.hiddenPaths=k(k({},g.hiddenPaths),{},M({},r,1));else{var d=k({},g.hiddenPaths);delete d[r],g.hiddenPaths=d}},h=function(t,r){e.collapsedOnClickBrackets&&l(t,r.path),o("bracketsClick",t,r)},s=function(t,r){l(t,r.path),o("iconClick",t,r)},u=function(t,r){var d=K(e.data),p=e.rootPath;new Function("data","val","data".concat(r.slice(p.length),"=val"))(d,t),o("update:data",d)};return(0,i.watchEffect)(function(){j.value&&function(t){throw new Error("[VueJSONPretty] ".concat(t))}(j.value)}),(0,i.watchEffect)(function(){C.value&&w()}),(0,i.watch)(function(){return e.deep},function(t){t&&(g.hiddenPaths=N(t,e.collapsedNodeLength))}),(0,i.watch)(function(){return e.collapsedNodeLength},function(t){t&&(g.hiddenPaths=N(e.deep,t))}),function(){var t,r,d=(t=e.renderNodeKey)!==null&&t!==void 0?t:a.renderNodeKey,p=(r=e.renderNodeValue)!==null&&r!==void 0?r:a.renderNodeValue,f=g.visibleData&&g.visibleData.map(function(y){return(0,i.createVNode)(ce,{key:y.id,node:y,collapsed:!!g.hiddenPaths[y.path],theme:e.theme,showDoubleQuotes:e.showDoubleQuotes,showLength:e.showLength,checked:b.value.includes(y.path),selectableType:e.selectableType,showLine:e.showLine,showLineNumber:e.showLineNumber,showSelectController:e.showSelectController,selectOnClickNode:e.selectOnClickNode,nodeSelectable:e.nodeSelectable,highlightSelectedNode:e.highlightSelectedNode,editable:e.editable,editableTrigger:e.editableTrigger,showIcon:e.showIcon,showKeyValueSpace:e.showKeyValueSpace,renderNodeKey:d,renderNodeValue:p,onNodeClick:B,onBracketsClick:h,onIconClick:s,onSelectedChange:E,onValueChange:u,style:e.itemHeight&&e.itemHeight!==20?{lineHeight:"".concat(e.itemHeight,"px")}:{}},null)});return(0,i.createVNode)("div",{ref:m,class:{"vjs-tree":!0,"is-virtual":e.virtual,dark:e.theme==="dark"},onScroll:e.virtual?O:void 0,style:e.showLineNumber?k({paddingLeft:"".concat(12*Number(v.value.length.toString().length),"px")},e.style):e.style},[e.virtual?(0,i.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(e.height,"px")}},[(0,i.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(C.value.length*e.itemHeight,"px")}},[(0,i.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(g.translateY,"px)")}},[f])])]):f])}}});var ie=z.Z;const ue=(e,n)=>{const o=e.__vccOpts||e;for(const[a,m]of n)o[a]=m;return o},de={class:"midi-component"},pe={class:"midiLogs"},he={class:"text-2xl font-bold mb-4"},fe={class:"table-container"},me={class:"text-xl font-semibold mb-2"},ye={class:"message-list"},ge=["onClick"],ve={class:"text-sm text-gray-500"},be={key:0,class:"ml-2 text-blue-600"};return ue({__name:"big5chart",setup(e){const n=c.ref([]),o=c.ref([]),a=c.reactive({}),m=c.ref(null),v=c.ref([]),N=async()=>{try{m.value=await navigator.requestMIDIAccess({sysex:!0}),g(),m.value.onstatechange=g,j()}catch(l){console.error("Failed to get MIDI access:",l)}},g=()=>{n.value=Array.from(m.value.inputs.values()),o.value=Array.from(m.value.outputs.values()),o.value.forEach(C)},C=l=>{const h={id:l.id,addEventListener:(u,t)=>{l._listeners=l._listeners||[],l._listeners.push(t)},removeEventListener:(u,t)=>{l._listeners=l._listeners.filter(r=>r!==t)}},s=l.send.bind(l);l.send=u=>{if(s(u),l._listeners){const t={data:u};l._listeners.forEach(r=>r(t))}},b(h)},b=l=>{a[l.id]&&l.removeEventListener("midimessage",w),a[l.id]=c.reactive({inputs:{},outputs:{},clock:null,channelPressure:null,polyPressure:{}}),l.addEventListener("midimessage",h=>w(l.id,h,l instanceof MIDIInput?"inputs":"outputs"))},j=()=>{n.value.forEach(b),o.value.forEach(l=>{a[l.id]||(a[l.id]=c.reactive({inputs:{},outputs:{},clock:null,channelPressure:null,polyPressure:{}})),C(l)})},w=(l,h,s)=>{const[u,t,r]=h.data,d=u>>4,p=u&15;if(u===248){a[l].clock={description:"MIDI Clock",timestamp:Date.now()};return}if(d===13){a[l].channelPressure={description:`Channel Pressure (Aftertouch) - Value: ${t}`,timestamp:Date.now(),channel:p+1,messageType:"channelPressure"};return}if(d===10){a[l].polyPressure[`note-${t}`]={description:`Polyphonic Aftertouch - Note: ${t}, Pressure: ${r}`,timestamp:Date.now(),channel:p+1,messageType:"polyPressure",noteNumber:t,pressure:r};return}let f;d===9||d===8?f=`note-${t}`:d===11&&t===7?f=`volume-${t}`:f=`other-${Date.now()}`,a[l][s][f]={...O(h),timestamp:Date.now()},console.log(`Updated deviceMessages for ${l} ${s}:`,a[l][s]),Object.keys(a[l][s]).forEach(y=>{Date.now()-a[l][s][y].timestamp>5e3&&delete a[l][s][y]}),Object.keys(a[l].polyPressure).forEach(y=>{Date.now()-a[l].polyPressure[y].timestamp>5e3&&delete a[l].polyPressure[y]})},O=l=>{const[h,...s]=l.data,u=h>>4,t=h&15;let r,d,p;switch(u){case 8:r=`Note Off - Note: ${s[0]}, Velocity: ${s[1]}`,d="noteOff",p=s[0];break;case 9:r=`Note On - Note: ${s[0]}, Velocity: ${s[1]}`,d=s[1]>0?"noteOn":"noteOff",p=s[0];break;case 10:r=`Polyphonic Aftertouch - Note: ${s[0]}, Pressure: ${s[1]}`,d="polyPressure",p=s[0];break;case 11:s[0]===7?r=`Volume: ${s[1]}`:r=`CC - Controller: ${s[0]}, Value: ${s[1]}`;break;case 12:r=`Program Change - Program: ${s[0]}`;break;case 13:r=`Channel Pressure (Aftertouch) - Value: ${s[0]}`,d="channelPressure";break;case 14:r=`Pitch Bend - Value: ${(s[1]<<7)+s[0]}`,d="pitchBend";break;case 15:h===240?(r=`System Exclusive - Length: ${s.length} bytes`,d="sysex"):h===248?(r="Timing Clock",d="timingClock"):(r=`System Real-Time: ${h.toString(16).toUpperCase()}`,d="systemRealTime");break;default:r=`Unknown - Status: ${h.toString(16).toUpperCase()}, Data: ${s.join(", ")}`,d="unknown"}return{channel:t+1,noteNumber:p,description:r,messageType:d,rawData:[h,...s]}},E=l=>{console.info("🌷🌷🌷🌷🌷🌷MIDI Message:",l),v.value.unshift(l),v.value.length>50&&v.value.pop()},B=l=>{let h=null,s=null;const u=[];l.clock&&Date.now()-l.clock.timestamp<5e3&&(h={key:"clock",...l.clock}),l.channelPressure&&Date.now()-l.channelPressure.timestamp<5e3&&(s={key:"channelPressure",...l.channelPressure});for(const t of["inputs","outputs"])for(const[r,d]of Object.entries(l[t]||{})){const p=l.polyPressure[r];p?u.push({key:r,direction:t,...d,polyPressure:p.pressure}):u.push({key:r,direction:t,...d})}return u.sort((t,r)=>r.timestamp-t.timestamp),s&&u.unshift(s),h&&u.unshift(h),u};return c.onMounted(()=>{N()}),c.onBeforeUnmount(()=>{n.value.forEach(l=>{a[l.id]&&l.removeEventListener("midimessage",w)})}),(l,h)=>(c.openBlock(),c.createElementBlock("div",de,[c.createElementVNode("div",pe,[h[0]||(h[0]=c.createElementVNode("h2",{class:"text-2xl font-bold mb-4"},"MIDI Logs",-1)),(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(v.value,(s,u)=>(c.openBlock(),c.createBlock(c.unref(ie),{key:u,path:"res",data:s,highlightMouseoverNode:!0,showDoubleQuotes:!1,showLength:!0,deep:1},null,8,["data"]))),128))]),(c.openBlock(),c.createElementBlock(c.Fragment,null,c.renderList(["inputs","outputs"],s=>c.createElementVNode("div",{key:s,class:"midi-table"},[c.createElementVNode("h2",he," MIDI "+c.toDisplayString(s.charAt(0).toUpperCase()+s.slice(1)),1),c.createElementVNode("div",fe,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(s==="inputs"?n.value:o.value,u=>(c.openBlock(),c.createElementBlock("div",{key:u.id,class:"device-column"},[c.createElementVNode("h3",me,c.toDisplayString(u.name),1),c.createElementVNode("div",ye,[(c.openBlock(!0),c.createElementBlock(c.Fragment,null,c.renderList(B(a[u.id]||{}),t=>(c.openBlock(),c.createElementBlock("div",{key:t.key,class:"message-card cursor-pointer hover:bg-gray-200",onClick:r=>E(t)},[c.createElementVNode("span",ve,"Ch "+c.toDisplayString(t.channel||"-")+":",1),c.createElementVNode("span",{class:c.normalizeClass(["text-2xl font-bold mr-2",{"note-on":t.messageType==="noteOn","note-off":t.messageType==="noteOff"}])},c.toDisplayString(t.noteNumber||"-"),3),c.createElementVNode("span",null,c.toDisplayString(t.description),1),t.polyPressure!==void 0?(c.openBlock(),c.createElementBlock("span",be," (Poly AT: "+c.toDisplayString(t.polyPressure)+") ",1)):c.createCommentVNode("",!0)],8,ge))),128))])]))),128))])])),64))]))}},[["__scopeId","data-v-3a66d2f0"]])});
